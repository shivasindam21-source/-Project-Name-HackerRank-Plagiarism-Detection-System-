<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HackerRank Plagiarism Check</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  
  body { 
    font-family: 'Inter', sans-serif; 
    /* Premium Midnight Theme */
    background: radial-gradient(circle at center, #1b262c 0%, #0f4c75 100%); 
    min-height: 100vh; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    padding: 40px 5px;
    color: #bbe1fa;
  }

  .top-header {
    color: #bbe1fa;
    font-size: 52px;
    font-weight: 800;
    margin-bottom: 40px;
    text-shadow: 0 0 20px rgba(187, 225, 250, 0.3);
    text-align: center;
    letter-spacing: -1px;
  }

  /* Login Card Area */
  .main-card {
    display: flex;
    width: 900px;
    max-width: 95%;
    background: #ffffff;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 40px 80px rgba(0,0,0,0.6);
    margin-bottom: 60px;
  }

  .left-side {
    flex: 1.1;
    background: #3282b8 url('https://www.transparenttextures.com/patterns/feathers.png');
    padding: 50px 40px;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .left-side h1 { font-size: 28px; line-height: 1.3; font-weight: 700; }

  .right-side {
    flex: 1;
    padding: 50px 40px;
    background: #fff;
    color: #1b262c;
    display: flex;
    flex-direction: column;
    align-items: center; 
  }

  h2 { font-size: 40px; margin-bottom: 30px; border-bottom: 4px solid #3282b8; border-radius: 2px; }

  form { width: 100%; display: flex; flex-direction: column; align-items: center; }
  input {
    width: 100%;
    padding: 14px;
    margin-bottom: 15px;
    border: 2px solid #e1e1e1;
    border-radius: 12px;
    font-size: 15px;
    outline: none;
    transition: 0.3s;
  }
  input:focus { border-color: #3282b8; }

  button {
    background: #3282b8;
    color: white;
    padding: 16px 70px;
    border-radius: 50px;
    font-weight: 800;
    cursor: pointer;
    border: none;
    margin-top: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 10px 20px rgba(50, 130, 184, 0.3);
    transition: 0.3s;
  }
  button:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(50, 130, 184, 0.4); }

  /* RESULTS AREA - 99% WIDTH & DARK GRID THEME */
  #result-container { 
    width: 99%; 
    background: rgba(27, 38, 44, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 20px; 
    padding: 15px; 
    border: 1px solid rgba(187, 225, 250, 0.2);
    box-shadow: 0 25px 50px rgba(0,0,0,0.4);
  }

  #result-table { 
    width: 100%; 
    border-collapse: separate; 
    border-spacing: 0;
    table-layout: fixed;
    border: 1px solid rgba(187, 225, 250, 0.1);
    border-radius: 12px;
    overflow: hidden;
  }

  #result-table th { 
    background: rgba(50, 130, 184, 0.2);
    color: #bbe1fa;
    padding: 20px;
    text-align: left;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    border-bottom: 2px solid #3282b8;
    /* Vertical line for headers */
    border-right: 1px solid rgba(187, 225, 250, 0.15);
  }

  #result-table td { 
    padding: 20px; 
    vertical-align: top;
    background: rgba(255, 255, 255, 0.02);
    color: #bbe1fa;
    /* Clean Vertical Lines */
    border-right: 1px solid rgba(187, 225, 250, 0.15);
    border-bottom: 1px solid rgba(187, 225, 250, 0.05);
  }

  /* Separation for each student */
  .student-row {
    border-top: 2px solid #3282b8;
  }

  /* Beautiful Code Display */
  pre { 
    background: #0b0e14; 
    color: #00ffff;
    padding: 20px; 
    border-radius: 12px; 
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px; 
    white-space: pre-wrap; 
    border-left: 4px solid #3282b8;
    box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
  }

  /* CYAN IMAGE LOADER (MATCHES YOUR IMAGE) */
  #loader-overlay {
    display: none;
    position: fixed;
    top:0; left:0; width: 100%; height:100%;
    background: rgba(15, 76, 117, 0.98);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }

  .segmented-circle {
    width: 110px; height: 110px;
    border-radius: 50%;
    border: 10px dotted #00ffff; 
    animation: rotateSegments 1.8s linear infinite;
    filter: drop-shadow(0 0 15px #00ffff);
    margin-bottom: 40px;
  }

  .progress-bar-wrap {
    width: 350px; height: 40px;
    border: 3px solid #00ffff;
    border-radius: 10px;
    padding: 5px;
    display: flex; gap: 4px;
    background: rgba(0,0,0,0.3);
  }

  .progress-segment {
    height: 100%; flex: 1;
    background: #00ffff;
    opacity: 0.1;
    animation: blockFill 2s infinite;
  }

  /* Delay for block filling animation */
  .progress-segment:nth-child(1) { animation-delay: 0.1s; }
  .progress-segment:nth-child(2) { animation-delay: 0.2s; }
  .progress-segment:nth-child(3) { animation-delay: 0.3s; }
  .progress-segment:nth-child(4) { animation-delay: 0.4s; }
  .progress-segment:nth-child(5) { animation-delay: 0.5s; }
  .progress-segment:nth-child(6) { animation-delay: 0.6s; }
  .progress-segment:nth-child(7) { animation-delay: 0.7s; }
  .progress-segment:nth-child(8) { animation-delay: 0.8s; }
  .progress-segment:nth-child(9) { animation-delay: 0.9s; }
  .progress-segment:nth-child(10) { animation-delay: 1.0s; }

  @keyframes rotateSegments { 100% { transform: rotate(360deg); } }
  @keyframes blockFill { 0%, 100% { opacity: 0.1; } 50% { opacity: 1; box-shadow: 0 0 10px #00ffff; } }

  .loader-text {
    margin-top: 25px;
    color: #00ffff;
    text-transform: uppercase;
    letter-spacing: 6px;
    font-size: 22px;
    font-weight: 800;
  }
</style>
</head>
<body>

  <h1 class="top-header">HackerRank Plagiarism Check</h1>

  <div class="main-card">
    <div class="left-side">
      <h1>Hacker rank plagiarism check Enter username password and contest name</h1>
    </div>

    <div class="right-side">
      <h2>Login</h2>
      <form id="contestForm">
        <input type="text" id="username" placeholder="user name" required>
        <input type="password" id="password" placeholder="password" required>
        <input type="text" id="contest" placeholder="contest name" required>
        <button type="submit">Login</button>
      </form>
    </div>
  </div>

  <div id="result-container">
    <table id="result-table">
      <thead>
        <tr>
          <th style="width: 15%;">Team Name</th>
          <th style="width: 12%;">Language</th>
          <th style="width: 18%;">Copied From</th>
          <th style="width: 55%; border-right: none;">Code Analysis</th>
        </tr>
      </thead>
      <tbody id="result-body">
        <tr>
          <td colspan="4" style="text-align: center; border: none; padding: 40px; color: rgba(187, 225, 250, 0.4);">
            Awaiting analysis...
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div id="loader-overlay">
    <div class="segmented-circle"></div>
    <div class="progress-bar-wrap">
        <div class="progress-segment"></div><div class="progress-segment"></div><div class="progress-segment"></div>
        <div class="progress-segment"></div><div class="progress-segment"></div><div class="progress-segment"></div>
        <div class="progress-segment"></div><div class="progress-segment"></div><div class="progress-segment"></div>
        <div class="progress-segment"></div>
    </div>
    <div class="loader-text">scripts are loading</div>
  </div>

<script>
document.getElementById("contestForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const contest = document.getElementById("contest").value.trim();
  const loader = document.getElementById("loader-overlay");
  const resultBody = document.getElementById("result-body");

  if (!username || !password || !contest) return;

  loader.style.display = "flex";

  try {
    const res = await fetch("/run", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password, contest })
    });

    const data = await res.json();
    loader.style.display = "none";

    if (!data || data.error) {
      resultBody.innerHTML = `<tr><td colspan='4' style="text-align:center; color:#ff4d4d; border:none;">Error: ${data ? data.error : "No data"}</td></tr>`;
      return;
    }

    resultBody.innerHTML = "";
    data.forEach((item) => {
      const row = document.createElement("tr");
      row.className = "student-row"; 
      row.innerHTML = `
        <td style="font-weight:700; color:#00ffff;">${item.teamname || "N/A"}</td>
        <td style="text-align:center;"><span style="color:#3282b8; background:#bbe1fa; padding:4px 10px; border-radius:4px; font-weight:bold; font-size:12px;">${item.lang || "N/A"}</span></td>
        <td style="color:#bbe1fa; opacity:0.8;">${item.copiedfrom || "N/A"}</td>
        <td style="border-right:none;"><pre>${item.code || "N/A"}</pre></td>
      `;
      resultBody.appendChild(row);
    });

  } catch (err) {
    loader.style.display = "none";
    resultBody.innerHTML = `<tr><td colspan='4' style="text-align:center; color:#ff4d4d; border:none;">Server Error: ${err}</td></tr>`;
  }
});
</script>
</body>
</html>